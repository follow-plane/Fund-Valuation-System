# 产品需求文档 (PRD) - 基金估值 & 股票行情分析助手

## 1. 产品概述
本产品是一款集成“基金智能管理”与“股票实时行情分析”的综合性理财软件。对标东方财富等专业金融终端，旨在为个人投资者提供从基础资产管理到深度数据分析的一站式解决方案。系统严格执行“真实数据”原则，所有行情均来源于主流金融接口，确保决策依据的科学性。

## 2. 核心目标
-   **全资产覆盖**：打破单一基金管理，引入 A 股股票行情，实现基金与股票的统一视图。
-   **专业级体验**：提供分时走势、K 线技术分析、五档盘口等专业交易工具。
-   **数据高精度**：持仓成本严格遵循 4 位小数精度，份额遵循 2 位小数精度，拒绝四舍五入误差。
-   **智能辅助决策**：集成 AI 深度诊断（基于豆包大模型）与量化评分模型。
-   **极致数据隐私**：所有持仓数据本地 SQLite 存储，不进行任何云端上传。

## 3. 功能模块详情

### 3.1 股票行情分析模块 (新增/核心)
-   **多维搜索**: 支持股票代码、名称、拼音缩写的模糊搜索。
-   **实时行情**: 展示现价、涨跌幅、成交量、成交额、振幅、换手率等核心指标。
-   **专业图表**: 
    -   **分时图**: 包含昨收参考线及面积填充走势。
    -   **K 线图**: 支持日、周、月切换，集成 MA5/MA10/MA20 移动平均线。
-   **五档盘口**: 实时展示卖 1-5 及买 1-5 的价格与委托量。
-   **自动刷新**: 交易时段支持 3 秒级局部自动刷新（Fragment 技术）。

### 3.2 基金数据查询与深度诊断
-   **实时估值**: 对接东方财富接口，实时同步基金净值估算。
-   **智能诊断**: 
    -   **本地模型**: 基于业绩、风险、经理、费率四维度的量化评分。
    -   **AI 分析**: 接入豆包 AI，生成包含宏观环境、个基表现、操作建议的深度报告。
-   **数据刷新**: 手动刷新与 1 秒级自动刷新。

### 3.3 持仓管理与高精度收益统计
-   **精细化录入**: 
    -   **持仓成本**: 严格支持 4 位小数输入与存储。
    -   **持有份额**: 支持 2 位小数。
-   **实时收益看板**: 
    -   **当日预估收益**: 基于实时估值动态计算。
    -   **累计盈亏**: 资产总额与总成本的实时差值。
-   **资产分布**: 通过饼图展示持仓结构。

### 3.4 智能定投规划
-   **定投测算器**: 基于历史回测数据，输出乐观/中性/悲观三种预期收益曲线。
-   **定投计划管理**: 记录定投日，提供下次定投提醒。

### 3.5 实时财经资讯
-   **资讯流**: 实时抓取财联社头条资讯，支持点击跳转原文。

## 4. 关键技术指标
-   **数据精度**: 成本 0.0001 步进，份额 0.01 步进。
-   **响应速度**: 侧边栏搜索毫秒级响应，主图表加载 < 1s。
-   **刷新频率**: 交易时段 Fragment 自动刷新（1s - 3s 可调）。

## 5. 数据要求与隐私
-   **数据源**: Sina HQ、EastMoney Push2、财联社、天天基金。
-   **存储**: `fund_data.db` (SQLite)。

## 6. 产品边界
-   **非交易终端**: 系统不提供下单、买卖等直接交易功能。
-   **免责声明**: AI 诊断及量化评分仅供参考，不构成任何形式的投资建议。
